# 持久化
**AOF**
> AOF（Append Only File）持久化方式是把redis执行过的所有写命令以**只读**的方式**追加**到一个日志文件中，重启时会把AOF文件中的命令重新执行一遍达到恢复redis中的绝大部分数据的目的。丢失的部分内存数据是因为执行的redis命令追加到文件的过程会有**延迟**。

> AOF这种机制的好处是备份的数据比RDB的持久化方式更为完善，一般AOF会每隔1秒将命令追加到日志文件中。更具体的过程描述是先将要追加的数据写入到**os cache**，再每秒调用一次fsync操作，强制将os cache中的数据写入到磁盘文件中。

> AOF方式有一个问题就是，redis的会将写入操作保存到日志文件，那么AOF的日志文件是不是别大？redis可用内存空间满了还会根据淘太策略删除键值，删除的键还需要保存吗？。所以AOF日志文件膨胀到一定大小时会有rewrite操作。

